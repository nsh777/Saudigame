<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø±Ø³Ù… Ùˆ ØªØ®Ù…ÙŠÙ† - Saudi Drawing Game</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <h1>ğŸ¨ Ø±Ø³Ù… Ùˆ ØªØ®Ù…ÙŠÙ†</h1>
                <p>Saudi Drawing Game</p>
            </div>
            <div class="player-info">
                <div class="player-count">
                    <span id="playerCount">0</span> Ù„Ø§Ø¹Ø¨ÙŠÙ†
                </div>
                <div class="timer">
                    <span id="timer">60</span> Ø«Ø§Ù†ÙŠØ©
                </div>
            </div>
        </header>

        <!-- Game Area -->
        <main class="game-area">
            <!-- Drawing Canvas -->
            <div class="drawing-section">
                <div class="canvas-container">
                    <canvas id="drawingCanvas" width="800" height="600"></canvas>
                    <div class="canvas-overlay" id="canvasOverlay">
                        <div class="waiting-message">
                            <h2>Ø§Ù†ØªØ¸Ø± Ø¯ÙˆØ±Ùƒ...</h2>
                            <p>Ø³ØªØ¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø© Ù‚Ø±ÙŠØ¨Ø§Ù‹</p>
                        </div>
                    </div>
                </div>
                
                <!-- Drawing Tools -->
                <div class="drawing-tools">
                    <div class="tool-group">
                        <button class="tool-btn active" data-tool="brush" title="ÙØ±Ø´Ø§Ø©">
                            ğŸ–Œï¸
                        </button>
                        <button class="tool-btn" data-tool="eraser" title="Ù…Ù…Ø­Ø§Ø©">
                            ğŸ§½
                        </button>
                    </div>
                    
                    <div class="color-palette">
                        <button class="color-btn active" data-color="#000000" style="background-color: #000000;"></button>
                        <button class="color-btn" data-color="#FF0000" style="background-color: #FF0000;"></button>
                        <button class="color-btn" data-color="#00FF00" style="background-color: #00FF00;"></button>
                        <button class="color-btn" data-color="#0000FF" style="background-color: #0000FF;"></button>
                        <button class="color-btn" data-color="#FFFF00" style="background-color: #FFFF00;"></button>
                        <button class="color-btn" data-color="#FF00FF" style="background-color: #FF00FF;"></button>
                        <button class="color-btn" data-color="#00FFFF" style="background-color: #00FFFF;"></button>
                        <button class="color-btn" data-color="#FFA500" style="background-color: #FFA500;"></button>
                    </div>
                    
                    <div class="brush-size">
                        <label>Ø­Ø¬Ù… Ø§Ù„ÙØ±Ø´Ø§Ø©:</label>
                        <input type="range" id="brushSize" min="1" max="20" value="5">
                        <span id="brushSizeValue">5</span>
                    </div>
                    
                    <button class="clear-btn" id="clearCanvas">Ù…Ø³Ø­ Ø§Ù„Ø±Ø³Ù…Ø©</button>
                </div>
            </div>

            <!-- Game Info and Chat -->
            <div class="game-info">
                <!-- Word Display -->
                <div class="word-display">
                    <h3>Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±Ø³ÙˆÙ…Ø©:</h3>
                    <div class="word-container">
                        <span id="currentWord">_ _ _ _ _</span>
                    </div>
                    <div class="word-hint">
                        <span id="wordHint">ØªÙ„Ù…ÙŠØ­: ÙƒÙ„Ù…Ø© Ø³Ø¹ÙˆØ¯ÙŠØ©</span>
                    </div>
                </div>

                <!-- Scoreboard -->
                <div class="scoreboard">
                    <h3>Ø§Ù„Ù†ØªØ§Ø¦Ø¬</h3>
                    <div class="players-list" id="playersList">
                        <!-- Players will be added here dynamically -->
                    </div>
                </div>

                <!-- Chat -->
                <div class="chat-section">
                    <h3>Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©</h3>
                    <div class="chat-messages" id="chatMessages">
                        <div class="message system">
                            <span>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù„Ø¹Ø¨Ø© Ø±Ø³Ù… ÙˆØªØ®Ù…ÙŠÙ† Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©! ğŸ¨</span>
                        </div>
                    </div>
                    <div class="chat-input">
                        <input type="text" id="chatInput" placeholder="Ø§ÙƒØªØ¨ ØªØ®Ù…ÙŠÙ†Ùƒ Ù‡Ù†Ø§..." maxlength="50">
                        <button id="sendMessage">Ø¥Ø±Ø³Ø§Ù„</button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Game Controls -->
        <div class="game-controls">
            <div class="control-group">
                <button class="btn btn-primary" id="startGame">
                    <span class="btn-icon">ğŸ®</span>
                    Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
                </button>
                <button class="btn btn-success" id="createRoom">
                    <span class="btn-icon">ğŸ </span>
                    Ø¥Ù†Ø´Ø§Ø¡ ØºØ±ÙØ© Ù…ØªØ¹Ø¯Ø¯Ø©
                </button>
                <button class="btn btn-secondary" id="joinRoom">
                    <span class="btn-icon">ğŸ”—</span>
                    Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ù„ØºØ±ÙØ©
                </button>
                <button class="btn btn-info" id="testFirebase" style="display: none;">
                    <span class="btn-icon">ğŸ”§</span>
                    Ø§Ø®ØªØ¨Ø§Ø± Firebase
                </button>
            </div>
            <div class="room-info" id="roomInfo" style="display: none;">
                <div class="room-code">
                    <span class="label">ÙƒÙˆØ¯ Ø§Ù„ØºØ±ÙØ©:</span>
                    <span class="code" id="roomCode">ABC123</span>
                    <button class="copy-btn" id="copyRoomCode">ğŸ“‹</button>
                </div>
                <div class="room-url">
                    <span class="label">Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©:</span>
                    <div class="url-container">
                        <input type="text" id="roomUrl" readonly>
                        <button class="copy-btn" id="copyRoomUrl">ğŸ“‹</button>
                    </div>
                </div>
                <div class="share-links">
                    <button class="share-btn" id="shareWhatsApp">ÙˆØ§ØªØ³Ø§Ø¨</button>
                    <button class="share-btn" id="shareTelegram">ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…</button>
                    <button class="share-btn" id="shareLink">Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</button>
                </div>
                <div class="room-instructions">
                    <p>ğŸ“± Ø´Ø§Ø±Ùƒ Ù‡Ø°Ø§ Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ø¹ Ø£ØµØ¯Ù‚Ø§Ø¦Ùƒ Ù„Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ù„Ø¹Ø¨Ø©</p>
                </div>
            </div>
            <button class="btn btn-danger" id="leaveGame" style="display: none;">
                <span class="btn-icon">ğŸšª</span>
                Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
            </button>
        </div>

        <!-- Word Selection Modal -->
        <div class="modal" id="wordModal">
            <div class="modal-content">
                <h3>Ø§Ø®ØªØ± ÙƒÙ„Ù…Ø© Ù„Ù„Ø±Ø³Ù…</h3>
                <div class="word-options" id="wordOptions">
                    <!-- Word options will be added here -->
                </div>
                <button class="btn btn-primary" id="selectWord">Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙƒÙ„Ù…Ø©</button>
            </div>
        </div>

        <!-- Join Room Modal -->
        <div class="modal" id="joinRoomModal">
            <div class="modal-content">
                <h3>Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ù„ØºØ±ÙØ©</h3>
                <div class="input-group">
                    <label for="roomCodeInput">Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„ØºØ±ÙØ©:</label>
                    <input type="text" id="roomCodeInput" placeholder="Ù…Ø«Ø§Ù„: ABC123" maxlength="6">
                </div>
                <div class="input-group">
                    <label for="playerNameInput">Ø§Ø³Ù…Ùƒ:</label>
                    <input type="text" id="playerNameInput" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ" maxlength="20">
                </div>
                <div class="modal-actions">
                    <button class="btn btn-primary" id="confirmJoin">Ø§Ù†Ø¶Ù…Ø§Ù…</button>
                    <button class="btn btn-secondary" id="cancelJoin">Ø¥Ù„ØºØ§Ø¡</button>
                </div>
            </div>
        </div>

        <!-- Game Over Modal -->
        <div class="modal" id="gameOverModal">
            <div class="modal-content">
                <h3>Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¬ÙˆÙ„Ø©!</h3>
                <div class="final-scores" id="finalScores">
                    <!-- Final scores will be added here -->
                </div>
                <button class="btn btn-primary" id="playAgain">Ù„Ø¹Ø¨ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</button>
            </div>
        </div>

        <!-- Notification Container -->
        <div class="notifications" id="notifications"></div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // Import Firebase modules
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, set, onValue, push, remove, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';
        
        // Firebase configuration
        const firebaseConfig = {
        apiKey: "AIzaSyDz2dGNUZNCRRoP27E9c4ZLBZGenD3fReo",
       authDomain: "saudigame-60120.firebaseapp.com",
       databaseURL: "https://saudigame-60120-default-rtdb.firebaseio.com",
       projectId: "saudigame-60120",
       storageBucket: "saudigame-60120.firebasestorage.app",
       messagingSenderId: "358047143137",
       appId: "1:358047143137:web:4d9d9341c88e4ba4bb93a0",
       measurementId: "G-N97NBBTS6X"
                                };
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        
        // Make Firebase available globally
        window.firebaseApp = app;
        window.firebaseDatabase = database;
        window.firebaseRef = ref;
        window.firebaseSet = set;
        window.firebaseOnValue = onValue;
        window.firebasePush = push;
        window.firebaseRemove = remove;
        window.firebaseServerTimestamp = serverTimestamp;
    </script>
    
    <script src="script.js"></script>
</body>
</html>
